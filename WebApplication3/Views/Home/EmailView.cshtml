@using DevExtreme.AspNet.Mvc;
@using WebApplication3.Dto;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@(Html.DevExtreme().TreeList<EmailDto>()
    .ID("tree-list")
    .DataSource(ds => ds.Mvc()
        .Controller("EmailTree")
        .LoadAction("Get")
        .UpdateAction("Put")
        .InsertAction("Post")
        .DeleteAction("Delete")
        .Key("emailId")
    )
    .RemoteOperations(r => r.Filtering(true).Sorting(true).Grouping(true))
    .KeyExpr("emailId")
    .ParentIdExpr("parentId")
    .ExpandedRowKeys(new[] { 1, 2 })
    .SearchPanel(seachPanel => seachPanel.Visible(true))
    .HeaderFilter(headerFilter => headerFilter.Visible(true))
  
    .ShowRowLines(true)
    .ShowBorders(true)
    .ColumnAutoWidth(true)
    .WordWrapEnabled(true)
    .Columns(columns =>
    {
        columns.AddFor(m => m.emailId).Visible(false);
        columns.AddFor(m => m.subject)
            .MinWidth(250);
        columns.AddFor(m => m.frome);
        columns.AddFor(m => m.text);
        columns.AddFor(m => m.date);
        columns.AddFor(m => m.isNew).Caption("New Employee ?");
        columns.AddFor(m => m.hasAttachment).Caption("Has Attachment ?");


    })
 .Editing(e => e.Mode(GridEditMode.Popup)
        .AllowAdding(true)
        .AllowDeleting(true)
        .AllowUpdating(true)
        .Popup(p => p
                .Title("Email Info")
                .ShowTitle(true)
                .Width(700)
                .Height(525)
            )
            .Form(f => f.Items(items =>
            {
                items.AddGroup()
                    .ColCount(2)
                    .ColSpan(2)
                    .Items(groupItems =>
                    {
                        groupItems.AddSimpleFor(m => m.subject);
                        groupItems.AddSimpleFor(m => m.frome);
                        groupItems.AddSimpleFor(m => m.text);
                        groupItems.AddSimpleFor(m => m.date);
                    });

                items.AddGroup()
                    .Caption("More Info")
                    .ColCount(2)
                    .ColSpan(2)
                    .Items(groupItems =>
                    {
                        groupItems.AddSimpleFor(m => m.isNew);
                        groupItems.AddSimpleFor(m => m.hasAttachment);
                       
                    });
            }))
        )
    )



